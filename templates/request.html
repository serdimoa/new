{% extends "base.html" %}

{% block title %}Просмотр всех Заявок{% endblock %}

{% block nav %}

            <!--sidebar nav start-->
            <ul class="nav nav-pills nav-stacked custom-nav">
                <li class="menu-list"><a href=""><i class="fa fa-home"></i> <span>Реестр детей</span></a>
                    <ul class="sub-menu-list">
                        <li ><a href="index.php?np=good"><i class="fa fa-search"></i> <span>Обзор</span></a></li>
                        <li><a href="index.php?np=children_new"><i class="fa fa-plus"></i> <span>Добавить ребенка</span></a></li>
                    </ul>
                </li>
                <li class="active"><a href="index.php?np=request"><i class="fa fa-envelope"></i> <span>Реестр заявок</span></a></li>
                <li class="menu-list "><a href=""><i class="fa fa-home"></i> <span>Контракты</span></a>
                    <ul class="sub-menu-list">
                        <li> <a href="index.php?np=kontrakt"><i class="fa fa-book"></i> <span>Обзор</span></a></li>
                        <li><a href="index.php?np=new_kontrakt"><i class="fa fa-plus"></i> <span>Добавить Контракт</span></a></li>
                    </ul>
                </li>
                <li><a id="Myunidf" href="index.html"><i class="fa fa-sign-out"></i> <span>Выход</span></a></li>

            </ul>
            <!--sidebar nav end-->
            {% endblock %}

            {% block heading %}

        <div class="page-heading">
            <h3>Список заявок</h3>
        </div>
        {% endblock %}


{% block content %}
        <div class="wrapper">
            <div class="row">
                <div id="datatbl" class="col-lg-12"></div>
            </div>
        </div>
        {% endblock %}

{% block customjs %}
<script>
    webix.ready(function(){
        webix.ui({
            container:'datatbl',
            view:"datatable",
            id:"datatabl",
            onContext:{},
            columns:[
                {id:'id',header:['№']},
                {id:'status',header:['Статус'],sort:'string',template:function(obj){
                    switch (obj.status){
                        case "1":
                            return "В очереди";
                            break;
                        case "2":
                            return "Принято";
                            break;
                        case "3":
                            return "Отказано";
                            break;
                        case "4":
                            return "Исполнено";
                            break;
                        default :
                            return "В очереди";
                            break;
                    }
                }},
                {id:'year',header:['Год'],sort:'string'},
                {id:'date',header:['Дата'],sort:'string'},
                {id:'type',fillspace:true,header:['Направление'],sort:'string',template:function(obj){
                    switch (obj.type){
                        case "1":
                            return "Лагеря с дневным пребыванием детей";
                            break;
                        case "2":
                            return "Лагеря труда и отдыха";
                            break;
                        case "4":
                            return "Лагеря палаточного типа";
                            break;
                        case "5":
                            return "Ханты-Мансийский автономный округ-Югра";
                            break;
                        case "6":
                            return "Тюменская область";
                            break;
                        case "7":
                            return "Свердловская область";
                            break;
                        case "8":
                            return "Краснодарский край г.Анапа";
                            break;
                        case "9":
                            return "Республика Адыгея";
                            break;
                        case "10":
                            return "Республика Болгария";
                            break;
                        default :
                            return "Заполнено не правильно";
                            break;

                    }
                }},
                {id:'time',header:['Сроки'],sort:'string', width:150,template:function(obj){
                    switch (obj.time){
                        case "1":
                            return "Весенние каникулы";
                            break;
                        case "2":
                            return "Летние каникулы";
                            break;
                        case "3":
                            return "Осенние каникулы";
                            break;
                        case "4":
                            return "Зимние каникулы";
                            break;
                        default :
                            return "Заполнено не правильно";
                            break;

                    }
                }
                },
                {id:'timeobj',header:['Смена'],sort:'string',template:function(obj){
                    switch (obj.timeobj){
                        case "1":
                            return "1 Смена";
                            break;
                        case "2":
                            return "2 Смена";
                            break;
                        case "3":
                            return "3 Смена";
                            break;
                        case "4":
                            return "4 Смена";
                            break;
                        default :
                            return " ";
                            break;

                    }
                }
                }

            ],
            url:'get_req.php',autoheight:true,scrollX:false,select: 'row',on:{
            onSelectChange:function(){
                var selectedid = $$("datatabl").getSelectedId(true).join();

                document.location.href = "profilereq.php?id="+selectedid;
            }


            }


        });
        webix.ui({
            view:"contextmenu",
            id:"cmenu",
            data:["Просмотреть"],
            on:{
                onItemClick:function(id){
                    var context = this.getContext();
                    if(this.getItem(id).id=="Просмотреть")
                        document.location.href = "profilereq.php?id="+context.id;
                    else
                        webix.alert("error");


                }
            }
        });
        $$("cmenu").attachTo($$("datatabl"));
    });

</script>
{% endblock %}
